
Reporting
=========
<aside class="notice">The Reporting section is still under construction and may be missing some information. Don't worry! We plan to update the entire documentation prior to Augur launching. Thank you for your patience as we make these updates.</aside>

<a href="images/Reporting Diagram.png"><img src="images/Reporting Diagram.png"></a>

The Reporting Diagram above is a high level overview of [Reporting](#report) implemented by Augur. There are four ways for a [Market](#market) to attempt to [Finalize](#finalized-market): [Designated Reporting](#designated-reporting), [Limited Reporting](#limited-reporting), [All Reporting](#all-reporting), and rarely a [Fork](#fork). Markets in Augur have 10 potential states after Market Creation. The potential states of a Market are as follows:

1. Pre-Reporting
2. Designated Reporting
3. Designated Dispute
4. Awaiting Migration
5. Limited Reporting
6. Limited Dispute
7. All Reporting
8. All Dispute
9. Forking
10. Finalized

The Pre-Reporting (1) state is the time period where the market's [End Time](#end-time) has not come to pass, generally this is the most active trading period. Once the End Time has come to pass, a Market with an [Designated Reporter](#designated-reporter) set will immediately enter it's Designated Reporting state.

The [Designated Reporting](#designated-reporting) (2) state is up to three days long, also known as the [Designated Report Phase](#designated-report-phase). During the Designated Reporting Phase the market is expected to be [Reported](#report) on by the Designated Reporter. As soon as the Designated Reporter submits their Report the Market will be moved into the Designated Dispute (3) state, also known as the [Designated Dispute Phase](#designated-dispute-phase). The Designated Dispute Phase lasts for three days, during which any [REP](#rep) holder can post a [Dispute Bond](#dispute-bond) to [Challenge](#challenge) the [Proposed Outcome](#proposed-outcome) Reported by the Designated Reporter. A Market in the Designated Dispute state is considered a [Market Awaiting Finalization](#market-awaiting-finalization) because if no Dispute Bond is posted the Proposed Outcome will become the [Final Outcome](#final-outcome) and the Market will be considered [Finalized](#finalized-market) (10). If a Dispute Bond is posted during the Designated Dispute Phase, or if the Designated Reporter fails to Report during the Designated Report Phase then the Market will be moved into the Awaiting Migration (4) state.

The Awaiting Migration (4) state can last up to 30 days and theoretically could be as short as one second long. During this time the Market is waiting for the next [Reporting Window](#reporting-window) to begin so that the Market can be moved into a Limited Reporting (5) state. Reporting Windows last a total of 30 days, the first 27 days are for the [Reporting Phase](#reporting-phase), the following 3 days are for the [Dispute Phase](#dispute-phase). When a Reporting Window ends another Reporting Window immediately starts.

Once a new Reporting Window has begun, any markets in the Awaiting Migration (4) state will be moved into the Limited Reporting (5) state, and the Reporting Phase will begin. During the Reporting Phase markets in both a Limited Reporting (5) and All Reporting (7) state will be reported on by [Registered Reporters](#reporter).

Once 27 days have passed the Reporting Window's Reporting Phase ends and the Dispute Phase begins. All Markets previously in the Limited Reporting (5) or All Reporting (7) states will move into the Limited Dispute (6) and All Dispute (8) states respectively. The Proposed Outcome for these markets becomes whichever outcome had the most REP staked on it during the Reporting Phase by Reporters. During the Dispute Phase any Market in the Limited Dispute or All Dispute state can be challenged by any REP holder willing to post a Dispute Bond.

If a Market in the Limited Dispute (6) state is challenged then it will be moved into the All Reporting (7) state at the start of the next Reporting Window, which should be a maximum of three days away from the posting of the dispute bond. If a Market in the All Dispute (8) state is challenged then that market will cause a [Fork](#fork) and be moved into the Fork (9) state.

The Fork (9) state is a special and rarely entered state. A Fork lasts sixty (60) days, known as the [Fork Period](#fork-period), and creates multiple [Universes](#universe) of Augur. Users can migrate their REP from the original  Universe into one of the new Universes (whichever they choose). Migration is one-way and final. The Universe with the most REP migrated to it by the end of the Fork Period will be chosen as the Winning Universe. Forked markets are considered Finalized (10) in each universe but only the Winning Universe will be able to [Settle](#settlement) shares and reward Reporters. Forking is discussed in greater detail in the below section: [Forking Details](#forking-details).

A Market can move into the Finalized (10) state anytime they have a Reported Proposed Outcome and move through a Dispute Phase without being challenged. Forks cannot be challenged and their markets are always considered Finalized. Once a market is finalized, traders can [Settle](#settlement) their [positions](#position) with the market.

The majority of Markets will most likely use Designated Reporting as it removes the need to wait for a Reporting Window to get to Market Settlement. Designated Reporting is designed to be fast and because of this doesn't leverage the decentralized oracle system built into Augur. Instead we are trusting the market creator's chosen Designated Reporter to accurately report on the outcome of the market. The result of Designated Reporting is still challengeable with a dispute bond so if the Designated Reporter does incorrectly report the outcome of the market it can be adjudicated by Limited Reporting in the next available Reporting Window. With the dispute system in place, we don't actually lose any security or truth as an incorrect Proposed Outcome for a market can be disputed.

Designated Reporting Details
----------------------------

[Designated Reporting](#designated-reporting) is an optional way to attempt [Market Resolution](#market-resolution). A [Market Creator](#market-creator) can add a [Designated Reporter Bond](#designated-reporter-bond) and assign an [Designated Reporter](#designated-reporter) during Market Creation. Designated Reporting provides the advantage of faster Market Resolution than any other type of Reporting. This is pleasing to Traders who want to [Settle](#settlement) their [Shares](#shares) and collect their earnings as soon as possible after a Market's [End Time](#end-time) has passed. Designated Reporting begins immediately following the End Time of a Market, unlike other forms of Reporting which must wait for the next available [Reporting Window](#reporting-window) before any attempt at Market Resolution can be made.

Designated Reporting consists of two phases which are completely independent of the continuous cycle of Reporting Windows. The first phase is known as the [Designated Report Phase](#designated-report-phase) which, unlike a Reporting Window's [Report Phase](#report-phase) which lasts 27 days, only lasts a maximum of three (3) days. Designated Report Phases is ended immediately when the Designated Reporter submits their [Report](#report) and the [Proposed Outcome](#proposed-outcome) is set for the Market. If the Designated Reporter fails to Report within the Designated Report Phase the Designated Reporter Bond is lost and the Market is moved into the next available Reporting Window for [Limited Reporting](#limited-reporting).

If the Designated Reporter does successful Report within the Designated Report Phase the Market enters the [Designated Dispute Phase](#designated-dispute-phase) which lasts for three (3) days. During this 3 day period any [REP](#rep) holder can post a [Dispute Bond](#dispute-bond) to [Challenge](#challenge) the Proposed Outcome Reported by the Designated Reporter. If a Dispute Bond is posted the Market is moved into the next available Reporting Window for Limited Reporting. If the market is left unchallenged for the duration of the Designated Dispute Phase then the Market's Proposed Outcome becomes the [Final Outcome](#final-outcome) and the Market is considered [Finalized](#finalized-market) allowing the Settlement of Shares.

If the Final Outcome for the Finalized Market matches the Proposed Outcome Reported by the Designated Reporter then the Designated Reporter Bond is refunded to the Market Creator. If the Final Outcome of the Market doesn't match the Proposed Outcome of the Designated Reporter, or the Designated Reporter fails to Report, then the Designated Reporter Bond is lost.

Reporting Windows and Registration
----------------------------------

[Reporting Windows](#reporting-window) continually occur and last for thirty (30) days. Reporting Windows have two phases, the [Reporting Phase](#reporting-phase) and the [Dispute Phase](#dispute-phase). The Reporting Phase lasts for twenty seven (27) days in which [Registered Reporters](#reporter) will be [Reporting](#report) on [Markets](#market) in the [Limited Reporting](#limited-reporting) and [All Reporting](#all-reporting) states. The Dispute Phase lasts three (3) days immediately following the Reporting Phase. During a Dispute Phase any [REP](#rep) holder is able to post a [Dispute Bond](#dispute-bond) to [Challenge](#challenge) the [Proposed Outcome](#proposed-outcome) of the Market. You do not need to have registered for the Reporting Window to post a Dispute Bond. In order to earn [Reporting Fees](#reporting-fee) as a REP holder you need to Report on Markets during the Reporting Phase.

Markets are placed into the next available Reporting Window following the [End Time](#end-time) of a Market. For example, if a Market's End Time is 12:00 AM EST on January 3rd 2053 and a Reporting Window was just started on January 1st 2053, the Market would move into the next Reporting Window that would be starting on January 31st, 2053, or 30 days since the start of the January 1st Window. [Designated Reporting](#designated-reporting) Markets are only placed into the next available Reporting Window if they are Challenged or the [Designated Reporter](#designated-reporter) fails to Report.

REP holders who intend to Report on the [Outcome](#outcome) of Markets in a Limited Reporting or All Reporting state will need to register to Report prior to the Reporting Window's start time. To do this, REP holders will purchase a [Registration Token](#registration-token), which are tied to a specific upcoming Reporting Window. The purpose of a Registration Token is to allow the system to get an approximation as to how many Reporters will be participating in the Reporting Window. This is used to calculate how many Markets each Reporter needs to Report on in order for the system to get its target number of Reports per Market. Registration Tokens can be purchased as far in advanced as you would like for any future Reporting Window, but cannot be purchased for a Reporting Window in progress or a past Reporting Window.

Limited and All Reporting Details
---------------------------------

[Limited Reporting](#limited-reporting) and [All Reporting](#all-reporting) are two types of [Market Resolution](#market-resolution) that leverage Augur's Decentralized Oracle System in order to reach a consensus about the [Outcome](#outcome) of a [Market](#market). Unlike the previously discussed [Designated Reporting](#designated-reporting-details), Limited and All Reporting require a [Reporting Window](#reporting-window) to operate within.

Discussed in greater detail in the [previous section](#reporting-windows-and-registration), Reporting Windows last for a total of 30 days, are split into two phases (the [Reporting Phase](#reporting-phase) and [Dispute Phase](#dispute-phase)), and occur infinitely, one starting immediately after the previous window ends. During a Reporting Window's Reporting Phase only [Registered Reporters](#reporter) can submit [Reports](#report) for Limited and All Reporting Markets.

Each Reporting Window calculates the minimum amount of reports each Registered Reporter will be required to make on Limited Reporting Markets within the Window. Reporters need to Report on at least the minimum amount of Limited Reporting Markets but can choose to report on all of them if they wish. Reporters must stake at least 1 attorep on a Outcome for the Report to count toward the minimum however there is no maximum limit for the stake assuming the Reporter has the REP to pay for it.

If a Limited Reporting Market has at least 1 attorep staked on an Outcome it will move into the Dispute Phase and [Await Finalization](#market-awaiting-finalization). If a Limited Reporting Market does not get any REP staked on it during a Reporting Phase it is moved to the next Reporting Window and does not appear in the Dispute Phase for the current Window.

Unlike Limited Reporting Markets, All Reporting Markets are **required** to be Reported on by every Registered Reporter within the Reporting Phase. This ensures that All Reporting Markets get more attention than a Limited Reporting Market may get, as Reporters a required to stake at least 1 attorep on an Outcome. Reporters that fulfill the minimum requirements of a Reporting Phase will be able to redeem their Registration Token for their deposit used to purchase the Registration Token.

Lets use a quick example:

You, a REP holder, purchase a Registration Token for an upcoming Reporting Window and wait until the Window Starts. Once it has started, you enter the Report Phase and find that there are 10 Limited Reporting Markets and 2 All Reporting Markets available to Report on. The Reporting Window has calculated that you need to Report on at least four (4) of the Limited Reporting Markets. You stake 1 REP on the Outcome you know is correct for four of the Limited Reporting Markets. This does not meet the minimum requirement yet however, as you also are **required** to report on both of the All Reporting Markets. You stake 1 REP into the Outcome you expect for each All Reporting Market. You have now met the minimum requirements to successfully redeem your Registration Token at this point, however you are also free to continue Reporting on the 6 remaining Limited Reporting Markets if you wish to do so. When you redeem your Registration Token you will receive back the value you used to purchase the token originally.

Forking Details
---------------

The final state of Reporting, if needed, is the very disruptive [Fork](#fork). Forks are disruptive because Augur needs to assume the Decentralized Oracle System is under attack if a Fork occurs. Since Augur assumes it's under attack, any non-[Finalized Market](#finalized-market) is put into a pending state, in which they will not be [reported](#report) on until the Fork is resolved.

As discussed above, if an [All Reporting](#all-reporting) [Market](#market)'s [Proposed Outcome](#proposed-outcome) is [Challenged](#challenged) during the [Dispute Phase](#dispute-phase) then the Market causes a [Fork](#fork). Forks cause the creation of [Universes](#universe) equal to the number of [Outcomes](#outcome) for the [Forked Market](#forked-market). A [Binary Market](#binary-market) that causes a Fork would create three Universes, one where the [Final Outcome](#final-outcome) is "Yes", one where the Final Outcome is "No", and one where the Final Outcome is "Invalid". The Universes will start with no markets, no liquidity, and no REP until someone migrates some REP to the new Universe. The only thing on a new Universe is the Finalized Forked Market.

All Markets created in Augur belong to a Universe. The Original Universe that contained the Market that caused the Fork to occur will become locked once the Fork happens, this Universe is considered the [Parent Universe](#parent-universe). Markets are always tradable, no matter what state they are in or what Universe. While trading can still take place in the Parent Universe, new Markets cannot be created in a [Locked Universe](#locked-universe), however they can be created in any of the new Universes spawned by the Fork, known as [Child Universes](#child-universe).

Forking causes the [REP](#rep) remaining in the Locked Universe to no longer have the ability to earn fees from Reporting as there will never be new Markets to Report on. REP holders are given the option to Migrate their REP to one of the Child Universes created by the Fork. Migration should be considered very carefully as it only happens in one direction and is irreversible, however if you ever want to use your REP to earn Reporting Fees again you will need to choose a Child Universe to Migrate too. There is no time limit on when a REP holder is allowed to migrate, they can choose to do it immediately after a Fork or wait for the Fork to resolve.

It should be noted that each Child Universe of a Fork will have their own version of REP. In other words, a new REP contract is created for each Child Universe that has REP from the Parent Universe's REP contract migrated to it. Only REP belonging to the Universe is valid REP to use within that Universe. Migrating REP from the Parent Universe to a Child Universe can be thought of as a permanent conversion of Parent Universe REP into Child Universe REP.

After a Fork occurs, a [Fork Period](#fork-period) begins and lasts for sixty (60) days, during which Reporting is put on hold. Once the Fork Period ends, a Winning Universe will be decided based on which Universe had the most REP migrated to it during the Fork Period. The Winning Universe is the Universe where pending Markets will be migrated to in order to allow them to be resolved by Reporting. The Winning Universe is the only Universe in which [Settlement](#settlement) will take place for the Forked Market. Although a Winning Universe is going to emerge from a Fork, the "Losing" Universes created by the Fork aren't any less valid than the Winning Universe, they are just less likely to see Markets created on them if the far majority of users are using the Winning Universe.
