
Reporting
=========
<aside class="notice">The Reporting section is still under construction and may be missing some information. Don't worry! We plan to update the entire documentation prior to Augur launching. Thank you for your patience as we make these updates.</aside>

<a href="images/Reporting Diagram.png"><img src="images/Reporting Diagram.png"></a>

The Reporting Diagram above is a high level overview of [Reporting](#report) implemented by Augur. There are four ways for a [Market](#market) to attempt to [Finalize](#finalized-market): [Designated Reporting](#designated-reporting), [First Round Reporting](#first-round-reporting), [Last Round Reporting](#last-round-reporting), and rarely a [Fork](#fork). Markets in Augur have 10 potential states after Market Creation. The potential states of a Market are as follows:

1. Pre-Reporting
2. Designated Reporting
3. Designated Dispute
4. Awaiting Migration
5. First Round Reporting
6. First Round Dispute
7. Last Round Reporting
8. Last Round Dispute
9. Fork
10. Finalized

The Pre-Reporting (1) state is the time period where the market's [End Time](#end-time) has not come to pass, generally this is the most active trading period. Once the End Time has come to pass, the Market will immediately enter it's Designated Reporting state.

The [Designated Reporting](#designated-reporting) (2) state is up to three days long, also known as the [Designated Report Phase](#designated-report-phase). During the Designated Reporting Phase the Market is expected to be [Reported](#report) on by the [Designated Reporter](#designated-reporter). As soon as the Designated Reporter submits their Report the Market will be moved into the Designated Dispute (3) state, also known as the [Designated Dispute Phase](#designated-dispute-phase), and [First Report REP Bond](#first-report-rep-bond) and [First Report GAS Bond](#first-report-gas-bond) are both refunded immediately to the Market Creator.

The Designated Dispute Phase lasts for three days, during which any [REP](#rep) holder can post a [Dispute Bond](#dispute-bond) to [Challenge](#challenge) the [Proposed Outcome](#proposed-outcome) Reported by the Designated Reporter. A Market in the Designated Dispute state is considered a [Market Awaiting Finalization](#market-awaiting-finalization) because if no Dispute Bond is posted the Proposed Outcome will become the [Final Outcome](#final-outcome) and the Market will be considered [Finalized](#finalized-market) (10).

If a Dispute Bond is posted during the Designated Dispute Phase, or if the Designated Reporter fails to Report during the Designated Report Phase then the Market will be moved into the Awaiting Migration (4) state. If the reason the market moves into the Awaiting Migration state is because the Designated Reporter failed to Report, then the First Report REP Bond and First Report GAS Bond are sent to the nearest [Reporting Window](#reporting-window).

The Awaiting Migration (4) state can last up to 30 days and theoretically could be as short as one second long. During this time the Market is waiting for the next Reporting Window to begin so that the Market can be moved into a First Round Reporting (5) state. Reporting Windows last a total of 30 days, the first 27 days are for the [Reporting Phase](#reporting-phase), the following 3 days are for the [Dispute Phase](#dispute-phase). When a Reporting Window ends another Reporting Window immediately starts.

Once a new Reporting Window has begun, any markets in the Awaiting Migration (4) state will be moved into the First Round Reporting (5) state, and the Reporting Phase will begin. During the Reporting Phase markets in both a First Round Reporting (5) and Last Round Reporting (7) state will be reported on by [Reporters](#reporter).

In the event that a Market is moved into First Round Reporting due to a Designated Reporter failing to Report, then the first person to submit a Report will receive the First Report GAS Bond and the First Report REP Bond. The First Report REP Bond is applied to whatever stake of REP is submit with the First Report. The First Report GAS Bond is used on behalf of the First Reporter to pay for their transaction GAS cost and if there is any ETH left over it will be given to the First Reporter.

Once 27 days have passed the Reporting Window's Reporting Phase ends and the Dispute Phase begins. All Markets previously in the First Round Reporting (5) or Last Round Reporting (7) states will move into the First Round Dispute (6) and Last Round Dispute (8) states respectively. The Proposed Outcome for these Markets becomes whichever [Outcome](#outcome) had the most REP staked on it during the Reporting Phase by Reporters. During the Dispute Phase any Market in the First Round Dispute or Last Round Dispute state can be [Challenged](#challenge) by any REP holder willing to post a [Dispute Bond](#dispute-bond).

If a Market in the First Round Dispute (6) state is challenged then it will be moved into the Last Round Reporting (7) state at the start of the next Reporting Window, which should be a maximum of three days away from the posting of the dispute bond. If a Market in the Last Round Dispute (8) state is Challenged then that Market will cause a [Fork](#fork) and be moved into the Fork (9) state.

The Fork (9) state is a special and rarely entered state. A Fork lasts sixty (60) days, known as the [Fork Period](#fork-period), and creates multiple [Universes](#universe) of Augur. Users can migrate their REP from the original  Universe, known as the [Parent Universe](#parent-universe), into one of the new Universes, known as a [Child Universe](#child-universe). Migration is one-way and final and any REP that isn't involved with the Forked Market is able to be migrated to the REP holder's chosen Child Universe. The [Forked Market](#forked-market)'s staked REP is automatically moved to the Child Universe corresponding to that Outcome the REP is staked on.

The Universe with the most REP migrated to it by the end of the Fork Period will be chosen as the Winning Universe. Forked Markets are considered Finalized (10) in each Universe but only the Winning Universe will be able to [Settle](#settlement) shares and reward Reporters. Forking is discussed in greater detail in the below section: [Forking Details](#forking-details).

A Market can move into the Finalized (10) state anytime they have a Reported Proposed Outcome and move through a Dispute Phase without being Challenged. Forks cannot be Challenged and the Forked Market is always considered Finalized in each Child Universe. Once a Market is Finalized, traders can [Settle](#settlement) their [positions](#position) with the Market.

Designated Reporting is designed to be fast and because of this doesn't leverage the decentralized oracle system built into Augur. Instead we are trusting the Market Creator's chosen Designated Reporter to accurately Report on the Outcome of the Market. The result of Designated Reporting is still Challengeable with a Dispute Bond so if the Designated Reporter does incorrectly Report the Outcome of the Market it can be adjudicated by First Round Reporting in the next available Reporting Window. With the dispute system in place, we don't actually lose any security or truth as an incorrect Proposed Outcome for a Market can be Challenged.

Designated Reporting Details
----------------------------

[Designated Reporting](#designated-reporting) is a way to attempt quick [Market Resolution](#market-resolution). A [Market Creator](#market-creator) must assign a [Designated Reporter](#designated-reporter) during Market Creation. Designated Reporting provides the advantage of faster Market Resolution than any other type of Reporting. This is pleasing to Traders who want to [Settle](#settlement) their [Shares](#shares) and collect their earnings as soon as possible after a Market's [End Time](#end-time) has passed. Designated Reporting begins immediately following the End Time of a Market, unlike other forms of Reporting which must wait for the next available [Reporting Window](#reporting-window) before any attempt at Market Resolution can be made.

Designated Reporting consists of two phases which are completely independent of the continuous cycle of Reporting Windows. The first phase is known as the [Designated Report Phase](#designated-report-phase) which, unlike a Reporting Window's [Report Phase](#report-phase) which lasts 27 days, only lasts a maximum of three (3) days. The Designated Report Phase is ended immediately when the Designated Reporter submits their [Report](#report) and the [Proposed Outcome](#proposed-outcome) is set for the Market.

If the Designated Reporter fails to Report within the Designated Report Phase the First Report REP Bond, the First Report GAS Bond and the Market is moved into the next available Reporting Window for [First Round Reporting](#first-round-reporting). These Bonds will be used to help pay for the gas costs and add to the REP staked by the First Reporter to Report on this Market when First Round Reporting begins.

If the Designated Reporter does successful Report within the Designated Report Phase the [First Report REP Bond](#first-report-rep-bond) and the [First Report GAS Bond](#first-report-gas-bond) is refunded to the Market Creator immediately and the Market enters the [Designated Dispute Phase](#designated-dispute-phase) which lasts for three (3) days. During this 3 day period any [REP](#rep) holder can post a [Dispute Bond](#dispute-bond) to [Challenge](#challenge) the Proposed Outcome Reported by the Designated Reporter. If a Dispute Bond is posted the Market is moved into the next available Reporting Window for First Round Reporting. If the Market is left unchallenged for the duration of the Designated Dispute Phase then the Market's Proposed Outcome becomes the [Final Outcome](#final-outcome) and the Market is considered [Finalized](#finalized-market) allowing the Settlement of Shares.

Reporting Windows in Detail
---------------------------

[Reporting Windows](#reporting-window) continually occur and last for thirty (30) days. Reporting Windows have two phases, the [Reporting Phase](#reporting-phase) and the [Dispute Phase](#dispute-phase). The Reporting Phase lasts for twenty seven (27) days in which [Reporters](#reporter) will be [Reporting](#report) on [Markets](#market) in the [First Round Reporting](#first-round-reporting) and [Last Round Reporting](#last-round-reporting) states. The Dispute Phase lasts three (3) days immediately following the Reporting Phase. During a Dispute Phase any [REP](#rep) holder is able to post a [Dispute Bond](#dispute-bond) to [Challenge](#challenge) the [Proposed Outcome](#proposed-outcome) of the Market. In order to earn [Reporting Fees](#reporting-fee) as a REP holder you need to Report on Markets during the Reporting Phase.

Markets are placed into the next available Reporting Window following the [End Time](#end-time) of a Market. For example, if a Market's End Time is 12:00 AM EST on January 3rd 2053 and a Reporting Window was just started on January 1st 2053, the Market would move into the next Reporting Window that would be starting on January 31st, 2053, or 30 days since the start of the January 1st Window. [Designated Reporting](#designated-reporting) Markets are only placed into the next available Reporting Window if they are Challenged or the [Designated Reporter](#designated-reporter) fails to Report.

Any REP holder can participate in a Reporting Window. In fact, in special cases, someone without any REP is able to successfully Report on Markets in First Round Reporting. This case only occurs when the Market's Designated Reporter fails to Report during the Designated Report Phase. In this situation, the first person to submit a report can do so and stake 0 REP on the report. This is only the case because the First Report REP Bond is added to the First Report's Stake so in this case the stake can be 0 as it will get the bond added to it. This creates a race to be the First Reporter so as to attempt to get free REP from reporting correctly and earning the First Report REP Bond.

Reporting Round Details
-----------------------

If the [Proposed Outcome](#proposed-outcome) of a [Market](#market)'s [Designated Report Phase](#designated-report-phase) is [Challenged](#challenge) during the [Designated Dispute Phase](#designated-dispute-phase) or if the [Designated Reporter](#designated-reporter) fails to [Report](#report) then the Market will move into [Reporting Rounds](#reporting-rounds). Augur currently allows for two Reporting Rounds on a Market before a [Fork](#fork) is required to [Finalize the Market](#finalized-market), they are known as [First Round Reporting](#first-round-reporting) and [Last Round Reporting](#last-round-reporting) respectively.

Rounds of Reporting only occur during the [Reporting Phase](#reporting-phase), which is the first 27 days, of a [Reporting Window](#reporting-window). Any [REP](#rep) holder is can stake at least 1 attoREP on an [Outcome](#outcome) for a Market being Reported on in a Reporting Round. The Outcome with the most REP staked on it at the end of the Reporting Phase will become the Proposed Outcome during the [Dispute Phase](#dispute-phase) as the [Market Awaits Finalization](#market-awaiting-finalization). If the Market's Proposed Outcome isn't Challenged during the Dispute Phase then the Market will Finalize and the Proposed Outcome will become the [Final Outcome](#final-outcome).

REP holders who staked REP on the eventual Final Outcome will receive their REP back, a portion of [Reporting Fees](#reporting-fee), and a portion of the REP staked on Outcomes that weren't the Final Outcome. A larger stake of REP placed on the Final Outcome will result in a larger portion of the Reporting Fees and REP that is to be redistributed following the Reporting Window ending.

If the Market's Proposed Outcome is Challenged during a Dispute Phase then the Market will be elevated to the next level of Reporting Rounds in the following Reporting Window. However a Challenge to a Last Round Report will cause a Fork, which is discussed in greater detail in the [following section](#forking-details).

All Rounds of Reporting have virtually no difference between them, they operate exactly the same aside for two specific cases. One, as mentioned in the previous paragraph, is if the Last Round of Reporting is Challenged which causes a Fork. The second comes in the form of a Designated Reporter not Reporting on the Market so the Market moves to First Round Reporting. In this case the [First Report REP Bond](#first-report-rep-bond) and the [First Report GAS Bond](#first-report-gas-bond) are sent to the Reporting Window along with the Market.

The first person to Report on this Market is known as the [First Reporter](#first-reporter), and their Report is known as the [First Report](#first-report). The First Report is incentivized by Augur in two ways. The first way is the First Report GAS Bond which is used to cover the transaction cost of the First Report. If there is leftover ETH in the First Report GAS Bond after the First Report is submit then it will be sent to the First Reporter. The second way Augur incentivizes a First Report is the First Report REP Bond which is added to the Staked REP of the First Report.

The First Reporter doesn't need to be a REP holder in order to Report. This is the only case where someone without REP is able to Report. A First Reporter without any REP could stake 0 attoREP on their Report and because the First Report REP Bond is added to their stake they will have more than 1 attoREP staked, making the Report valid. If the First Reporter ends up Reporting the accurate Final Outcome they will get the First Report REP Bond back as if they had owned that REP all along. This is an interesting way to accumulate REP without needing to trade currency for it while simultaneously causing a race to Report, which helps Augur run smoothly by incentivizing at least one Report for Markets.

Forking Details
---------------

The final state of Reporting, if needed, is the very disruptive [Fork](#fork). Forks are disruptive because Augur needs to assume the Decentralized Oracle System is under attack if a Fork occurs. Since Augur assumes it's under attack, any non-[Finalized Market](#finalized-market) is put into a pending state, in which they will not be [reported](#report) on until the Fork is resolved.

As discussed above, if an [All Reporting](#all-reporting) [Market](#market)'s [Proposed Outcome](#proposed-outcome) is [Challenged](#challenged) during the [Dispute Phase](#dispute-phase) then the Market causes a [Fork](#fork). Forks cause the creation of [Universes](#universe) equal to the number of [Outcomes](#outcome) for the [Forked Market](#forked-market). A [Binary Market](#binary-market) that causes a Fork would create three Universes, one where the [Final Outcome](#final-outcome) is "Yes", one where the Final Outcome is "No", and one where the Final Outcome is "Invalid". The Universes will start with no markets, no liquidity, and no REP until someone migrates some REP to the new Universe. The only thing on a new Universe is the Finalized Forked Market.

All Markets created in Augur belong to a Universe. The Original Universe that contained the Market that caused the Fork to occur will become locked once the Fork happens, this Universe is considered the [Parent Universe](#parent-universe). Markets are always tradable, no matter what state they are in or what Universe. While trading can still take place in the Parent Universe, new Markets cannot be created in a [Locked Universe](#locked-universe), however they can be created in any of the new Universes spawned by the Fork, known as [Child Universes](#child-universe).

Forking causes the [REP](#rep) remaining in the Locked Universe to no longer have the ability to earn fees from Reporting as there will never be new Markets to Report on. REP holders are given the option to Migrate their REP to one of the Child Universes created by the Fork. Migration should be considered very carefully as it only happens in one direction and is irreversible, however if you ever want to use your REP to earn Reporting Fees again you will need to choose a Child Universe to Migrate too. There is no time limit on when a REP holder is allowed to migrate, they can choose to do it immediately after a Fork or wait for the Fork to resolve.

It should be noted that each Child Universe of a Fork will have their own version of REP. In other words, a new REP contract is created for each Child Universe that has REP from the Parent Universe's REP contract migrated to it. Only REP belonging to the Universe is valid REP to use within that Universe. Migrating REP from the Parent Universe to a Child Universe can be thought of as a permanent conversion of Parent Universe REP into Child Universe REP.

After a Fork occurs, a [Fork Period](#fork-period) begins and lasts for sixty (60) days, during which Reporting is put on hold. Once the Fork Period ends, a Winning Universe will be decided based on which Universe had the most REP migrated to it during the Fork Period. The Winning Universe is the Universe where pending Markets will be migrated to in order to allow them to be resolved by Reporting. The Winning Universe is the only Universe in which [Settlement](#settlement) will take place for the Forked Market. Although a Winning Universe is going to emerge from a Fork, the "Losing" Universes created by the Fork aren't any less valid than the Winning Universe, they are just less likely to see Markets created on them if the far majority of users are using the Winning Universe.
