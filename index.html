<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Augur documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["javascript"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">JavaScript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href="http://www.augur.net">Augur.net</a></li>
            <li><a href="http://demo.augur.net">Demo</a></li>
            <li><a href="http://augur.link/augur.pdf">Whitepaper</a></li>
            <li><a href="https://github.com/AugurProject">Github</a></li>
            <li><a href="https://twitter.com/AugurProject">Twitter</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="overview">Overview</h1>

<p><a href="http://augur.net">Augur</a> is a decentralized prediction market platform that runs on Ethereum.</p>

<h2 id="getting-started">Getting started</h2>

<p>The Augur client (user interface) is built and hosted at <a href="http://client.augur.net">client.augur.net</a>.  If you want to use or help test Augur, you do not need to download or install anything!  Just go to <a href="http://client.augur.net">client.augur.net</a> and start using it.  The latest bleeding-edge development build is at <a href="http://development.augur.divshot.io">development.augur.divshot.io</a>.</p>

<p>If you want to help develop Augur, you will need to build the client from source.  To do this, first install <a href="https://nodejs.org/">Node.js</a>, then execute the following commands to build the client:</p>

<p><code class="prettyprint">$ git clone https://github.com/AugurProject/augur.git</code></p>

<p><code class="prettyprint">$ cd augur</code></p>

<p><code class="prettyprint">$ ./nuke</code></p>

<p>(<code class="prettyprint">nuke</code> is a simple shell script that rebuilds the client.)  Next, start the static web server:</p>

<p><code class="prettyprint">$ npm start</code></p>

<p>Finally, go to <a href="http://localhost:8080">http://localhost:8080</a> in your web browser.  You should be greeted by Augur&rsquo;s overview interface.  Congratulations, you&rsquo;re ready to start hacking!</p>

<aside class="notice">If you are using or helping develop the Augur client (i.e., the front-end/user interface), it is usually not necessary for you to run a local Ethereum node on your computer.  We&rsquo;re already running several [hosted nodes](http://docs.augur.net/#hosted-node) that you can simply plug into!  Presently, the hosted nodes provide a snappier/more pleasant user (and developer) experience, due to a [caching process](https://github.com/AugurProject/marketeer) attached to each hosted node.  If you are running an Ethereum node, the client will automatically detect it and begin talking to it; if you are not, the client will default to using the hosted nodes.</aside>

          <h1 id="architecture">Architecture</h1>

<h2 id="local-node">Local node</h2>

<p><img src="images/architecture_local.svg" onerror="this.src='images/architecture_local.png'">
If you are running a <a href="https://github.com/ethereum/go-ethereum/wiki/Building-Ethereum">local Ethereum node</a>, sending RPC requests to your local node is the preferred way to use Augur.</p>

<aside class="notice">To use &ldquo;sendTransaction&rdquo; RPC commands (i.e., anything that requires Ether / is actually sent to the network) you will need to unlock your Ethereum node.  If you are running geth, the easiest way to do this is to start it with the <code>--unlock</code> option:

<code class="block">geth --unlock 0 --rpc --rpccorsdomain "http://localhost:8545" --rpcapi "shh,db,eth,net,web3" --shh --genesis /path/to/genesis_block.json --networkid 7 --bootnodes "enode://70eb80f63946c2b3f65e68311b4419a80c78271c099a7d1f3d8df8cdd8e374934c795d8bc9f204dda21eb9a318d30197ba7593494eb27ceb52663c8339e9cb70@[::]:30303,enode://405e781c84b570f02cb2e4ebb18c60528aba5a08ccd72d4ebd7aeabc09208ef24fa54e20ff3b10e478c203dd481f3820242e51fe72770a207a798eadfe8e7e6e@[::]:30303,enode://d4f4e7fd3954718562544dbf322c0c84d2c87f154dd66a39ea0787a6f74930c42f5d13ba2cfef481b66a6f002bc3915f94964f67251524696a448ba40d1e2b12@[::]:30303,enode://8f3c33294774dc266446e9c8483fa1a21a49b157d2066717fd52e76d00fb4ed771ad215631f9306db2e5a711884fe436bc0ca082684067836b3b54730a6c3995@[::]:30303,enode://4f23a991ea8739bcc5ab52625407fcfddb03ac31a36141184cf9072ff8bf399954bb94ec47e1f653a0b0fea8d88a67fa3147dbe5c56067f39e0bd5125ae0d1f1@[::]:30303,enode://bafc7bbaebf6452dcbf9522a2af30f586b38c72c84922616eacad686ab6aaed2b50f808b3f91dba6a546474fe96b5bff97d51c9b062b4a2e8bc9339d9bb8e186@[::]:30303"</code>
where <code>/path/to/genesis_block.json</code> is the genesis block for the (temporary) Augur private chain.  <a href="http://augur.link/genesis_block.json">Download the genesis block here.</a>
</aside>

<h2 id="hosted-node">Hosted node</h2>

<p><img src="images/architecture_hosted.svg" onerror="this.src='images/architecture_hosted.png'">
Understandably, many users will not want to go to the trouble of running a full Ethereum node solely for the purpose of using Augur.  Augur maintains five public Ethereum nodes, which are used automatically by <a href="http://client.augur.net">client.augur.net</a> if a local Ethereum node is not detected:</p>

<ul>
<li><a href="http://eth1.augur.net">http://eth1.augur.net</a></li>
<li><a href="http://eth2.augur.net">http://eth2.augur.net</a></li>
<li><a href="http://eth3.augur.net">http://eth3.augur.net</a></li>
<li><a href="http://eth4.augur.net">http://eth4.augur.net</a></li>
<li><a href="http://eth5.augur.net">http://eth5.augur.net</a></li>
</ul>

<p>All five nodes are temporarily on a private chain (networkid 7), rather than the main Frontier network, while Augur is in alpha/beta testing.</p>

          <h1 id="accounts">Accounts</h1>
<pre class="highlight javascript"><code><span class="cm">/**
 * Create an account using the augur.web.register method.
 */</span>

<span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="s2">"tinybike"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="s2">"tinypassword"</span><span class="p">;</span>

<span class="nx">augur</span><span class="p">.</span><span class="nx">web</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">account</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Account:"</span><span class="p">,</span> <span class="nx">account</span><span class="p">);</span> 
<span class="p">});</span>

<span class="c1">// output</span>
<span class="nl">Account</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">handle</span><span class="p">:</span> <span class="s2">"tinybike"</span><span class="p">,</span>
    <span class="nx">privateKey</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">Buffer</span> <span class="p">...</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">address</span><span class="err">:</span> <span class="s2">"0x09129dcde8e0f510ffb2a715709b69f5c4a42361"</span><span class="p">,</span>
    <span class="nx">nonce</span><span class="err">:</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="cm">/**
 * The user is automatically logged in after registering.  When logged in,
 * the user's data is kept in the the augur.web.account object.  Logging out
 * unsets the augur.web.account object.
 */</span>

<span class="nx">augur</span><span class="p">.</span><span class="nx">web</span><span class="p">.</span><span class="nx">logout</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Account:"</span><span class="p">,</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">web</span><span class="p">.</span><span class="nx">account</span><span class="p">);</span>

<span class="c1">// output</span>
<span class="p">{}</span>

<span class="cm">/* Logging in both sets and returns the augur.web.account object: */</span>

<span class="nx">augur</span><span class="p">.</span><span class="nx">web</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">account</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">augur</span><span class="p">.</span><span class="nx">web</span><span class="p">.</span><span class="nx">account</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// output</span>
<span class="p">{</span>
    <span class="nl">handle</span><span class="p">:</span> <span class="s2">"tinybike"</span><span class="p">,</span>
    <span class="nx">privateKey</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">Buffer</span> <span class="p">...</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">address</span><span class="err">:</span> <span class="s2">"0x09129dcde8e0f510ffb2a715709b69f5c4a42361"</span><span class="p">,</span>
    <span class="nx">nonce</span><span class="err">:</span> <span class="mi">0</span>
<span class="p">}</span>
</code></pre>

<p>augur.js includes a trustless account management system.  The purpose of the accounts system is to allow people to use Augur without needing to run an Ethereum node themselves, as running a full Ethereum node can be resource-intensive.</p>

<p>To use the account system, the user specifies a username and password.  Everything else is done automatically for the user.  The only requirement for the password is that it be at least 6 characters long.</p>

<p>A private key (+ derived public key and address) is automatically generated for the user.  A secret key derived from the password using PBKDF2, along with a random 128-bit initialization vector, is used to encrypt the private key (using AES-256).  The username, encrypted private key, and initialization vector are stored with <a href="https://www.firebase.com/">Firebase</a>.</p>

<aside class="success">Our account system is <b>trustless</b> because only the user&rsquo;s encrypted key is stored.  The user&rsquo;s randomly-generated private key is encrypted using their password, then indexed by username and stored with Firebase.  The user&rsquo;s password is never stored (not even a hash of it), nor is their public key or their address.  Neither we nor Firebase have any access to the user&rsquo;s account.  We can&rsquo;t see your account balance, your transaction history, or anything else.</aside>

<p>Transaction signing and serialization is entirely carried out in the browser using <a href="https://github.com/ethereum/ethereumjs-tx">ethereumjs-tx</a> and the <code class="prettyprint">eth_sendRawTransaction</code> RPC; the plaintext private key never touches our servers at any time.</p>

<p>Invoking contract methods is unchanged from normal use (from the client&rsquo;s perspective).  The Augur API functions can simply be called in the usual way (e.g., <code class="prettyprint">augur.reputationFaucet</code>), and augur.js will default to client-side transactions if the user is logged in.</p>

<aside class="notice">Since the user&rsquo;s account key is an ordinary Ethereum private key, the user&rsquo;s key (and therefore their funds and Reputation) can be used with any Ethereum node.  Therefore, although the accounts system is managed using an ordinary web server, since the user&rsquo;s funds are neither tied to nor controlled by our server, the accounts are still decentralized in the ways that (in our opinion) matter.</aside>

          <h1 id="callbacks">Callbacks</h1>
<pre class="highlight javascript"><code><span class="cm">/**
 * Check account 0x05ae1d0ca6206c6168b42efcd1fbe0ed144e821b's cash balance.
 */</span>

<span class="kd">var</span> <span class="nx">address</span> <span class="o">=</span> <span class="s2">"0x05ae1d0ca6206c6168b42efcd1fbe0ed144e821b"</span><span class="p">;</span>

<span class="c1">// Synchronous</span>
<span class="kd">var</span> <span class="nx">showMeTheMoney</span> <span class="o">=</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">getCashBalance</span><span class="p">(</span><span class="nx">address</span><span class="p">);</span>
<span class="c1">// '98855.99999999999999994145'</span>

<span class="c1">// Asynchronous</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">getCashBalance</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">showMeTheMoney</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">showMeTheMoney</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// prints 98855.99999999999999994145</span>

<span class="cm">/**
 * Send 50 cash to 0x05ae1d0ca6206c6168b42efcd1fbe0ed144e821b.  Because this
 * submits a transaction to the network, it can only be done asynchronously.
 */</span>

<span class="kd">var</span> <span class="nx">amountToSend</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">cb</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">onSent</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Sent:"</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span> <span class="p">},</span>
    <span class="na">onSuccess</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Success!"</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span> <span class="p">},</span>
    <span class="na">onFailed</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Failed:"</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span> <span class="p">}</span>
<span class="p">};</span>

<span class="nx">augur</span><span class="p">.</span><span class="nx">sendCash</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span> <span class="nx">amountToSend</span><span class="p">,</span> <span class="nx">cb</span><span class="p">.</span><span class="nx">onSent</span><span class="p">,</span> <span class="nx">cb</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">cb</span><span class="p">.</span><span class="nx">onFailed</span><span class="p">);</span>

<span class="c1">// Printed almost immediately; the callReturn field is the sendCash method's</span>
<span class="c1">// return value.  If the transaction was sent successfully, callReturn will</span>
<span class="c1">// be the amount of cash sent.  txHash (the transaction hash) uniquely</span>
<span class="c1">// identifies this transaction, and can be used to look it up.</span>
<span class="nl">Sent</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">txHash</span><span class="p">:</span> <span class="s1">'0xd5743b5b3bfdec989692b69d68fd8c979120e82cd199fdd80cff36dba42befbe'</span><span class="p">,</span>
    <span class="na">callReturn</span><span class="p">:</span> <span class="s1">'50'</span>
<span class="p">}</span>

<span class="c1">// Printed after about 12 seconds, when the transaction is detected to have a</span>
<span class="c1">// non-null blockHash value.</span>
<span class="nx">Success</span><span class="o">!</span> <span class="p">{</span>
    <span class="na">nonce</span><span class="p">:</span> <span class="s1">'0x6f'</span><span class="p">,</span>
    <span class="na">blockHash</span><span class="p">:</span> <span class="s1">'0x2f10d8cdb8b2746a5ed24f4021caffae3f25abca297622984c2baa69db0ac50f'</span><span class="p">,</span>
    <span class="na">blockNumber</span><span class="p">:</span> <span class="s1">'0x2c58'</span><span class="p">,</span>
    <span class="na">transactionIndex</span><span class="p">:</span> <span class="s1">'0x0'</span><span class="p">,</span>
    <span class="na">from</span><span class="p">:</span> <span class="s1">'0x05ae1d0ca6206c6168b42efcd1fbe0ed144e821b'</span><span class="p">,</span>
    <span class="na">to</span><span class="p">:</span> <span class="s1">'0xe4714fcbdcdba49629bc408183ef40d120700b8d'</span><span class="p">,</span>
    <span class="na">value</span><span class="p">:</span> <span class="s1">'0x0'</span><span class="p">,</span>
    <span class="na">gas</span><span class="p">:</span> <span class="s1">'0x2fd618'</span><span class="p">,</span>
    <span class="na">gasPrice</span><span class="p">:</span> <span class="s1">'0x11102181f5e'</span><span class="p">,</span>
    <span class="na">input</span><span class="p">:</span> <span class="s1">'0x693200ce00000000000000000000000005ae1d0ca6206c6168b42efcd1fbe0ed144e821b0000000000000000000000000000000000000000000000320000000000000000'</span><span class="p">,</span>
    <span class="na">callReturn</span><span class="p">:</span> <span class="s1">'50'</span><span class="p">,</span>
    <span class="na">txHash</span><span class="p">:</span> <span class="s1">'0xd5743b5b3bfdec989692b69d68fd8c979120e82cd199fdd80cff36dba42befbe'</span>
<span class="p">}</span>
</code></pre>

<p>Augur API methods that submit transactions to the network (using the <code class="prettyprint">eth_sendTransaction</code> RPC) take three callbacks, in the following order:</p>

<ul>
<li>onSent: fires when the transaction has been broadcast to the network.</li>
<li>onSuccess: fires when the transaction has been successfully incorporated into a block.</li>
<li>onFailed: fires if the RPC request returns an error.</li>
</ul>

<p>The <code class="prettyprint">onSent</code> callback is required; <code class="prettyprint">onSuccess</code> and <code class="prettyprint">onFailed</code> are both optional.  If the <code class="prettyprint">onSuccess</code> callback is supplied, augur.js will poll the network every 12 seconds with <code class="prettyprint">eth_getTransaction</code>, until the transaction record contains a non-null <code class="prettyprint">blockHash</code> value, or a maximum of 12 requests have been made.</p>

<p>Augur API methods that perform RPC requests that do not submit transactions to the network (using the <code class="prettyprint">eth_call</code> RPC) take a single optional callback as their last parameter.  Unlike transaction RPCs, call RPCs can be synchronous.  If a callback is supplied, the RPC request will be asynchronous; otherwise, it will be synchronous.</p>

<aside class="notice">Synchronous HTTP RPC is generally not recommended, especially if augur.js is running in the browser.  Synchronous RPC requests block the main JavaScript thread, which essentially freezes the browser!</aside>

          <h1 id="numbers">Numbers</h1>

<p>There are four acceptable ways to pass numerical inputs to the Augur API:</p>

<ul>
<li><p>primitive JS numbers (e.g., <code class="prettyprint">1010101</code>): ok for integers, but use strings for floating point numbers (see below)</p></li>
<li><p>stringified numbers (e.g., <code class="prettyprint">&quot;1010101&quot;</code>)</p></li>
<li><p>hexadecimal strings (e.g., <code class="prettyprint">&quot;0xf69b5&quot;</code>)</p></li>
<li><p>BigNumbers (e.g., <code class="prettyprint">new BigNumber(&quot;1010101&quot;)</code>)</p></li>
</ul>

<p>Note that for primitive JS numbers, you will receive an error from the BigNumber library if your input contains more than 15 significant figures.</p>

<p>Floating-point (decimal) values should be passed to augur.js as strings (e.g., instead of <code class="prettyprint">0.07</code>, use <code class="prettyprint">&quot;0.07&quot;</code>), for reasons described in <a href="http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">enormous detail</a> elsewhere.</p>

<aside class="notice"><b>All numerical parameters passed to augur.js must be either base 10 (decimal) or base 16 (hexadecimal).</b> Do <b>not</b> use the base 2<sup>64</sup> representation that Augur uses internally for fixed-point numbers!  augur.js handles all fixed-point conversions for you.  Do <b>not</b> send the Loch Ness monster 3.50 &times; 2<sup>64</sup> CASH.  (Probably don&rsquo;t even give him 3.50, but that&rsquo;s a debate for another time.)</aside>

          <h1 id="api">API</h1>
<pre class="highlight javascript"><code><span class="c1">// After installing, just require augur.js to use it.</span>
<span class="kd">var</span> <span class="nx">augur</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"augur.js"</span><span class="p">);</span>

<span class="c1">// Attempt to connect to a local Ethereum node</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>

<span class="c1">// Connect to a local Ethereum node with IPC support</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">"/home/augur/.ethereum/geth.ipc"</span><span class="p">);</span>

<span class="c1">// Connect to one of Augur's public nodes (eth1.augur.net)</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s2">"http://eth1.augur.net"</span><span class="p">);</span>
</code></pre>

<p>Augur&rsquo;s <a href="https://github.com/AugurProject/augur-core">core contracts</a> exist on Ethereum&rsquo;s decentralized network.  The various serialization, networking, and formatting tasks required to communicate with the Augur contracts from a web application are carried out by Augur&rsquo;s sprawling <a href="http://docs.augur.net/#architecture">middleware</a>.</p>

<p><a href="https://github.com/AugurProject/augur.js">augur.js</a> includes the Augur JavaScript API, and is the user-facing component of the middleware.  If you want to interact with the Augur contracts from a custom application, augur.js is the recommended way to do so.  The easiest way to install augur.js is using <a href="https://www.npmjs.com/package/augur.js">npm</a>:</p>

<p><code class="prettyprint">$ npm install augur.js</code></p>

<p>To use the Augur API, augur.js can either connect to an Ethereum node, which can be either remote (hosted) or local.  To specify the connection endpoint, pass your RPC/IPC connection info to <code class="prettyprint">augur.connect</code>.</p>

<aside class="notice"><code>augur.connect</code> also accepts a second argument specifying the path to geth&rsquo;s IPC (inter-process communication) file.  IPC creates a persistent connection using a Unix domain socket (or a named pipe on Windows).  It is significantly faster than HTTP RPC, but requires access to the filesystem, so it cannot be used from the browser.</aside>
<pre class="highlight javascript"><code><span class="cm">/**
 * All Augur functions have an optional callback (or callbacks) as their
 * final parameter.
 */</span>

<span class="nx">getCashBalance</span><span class="p">(</span><span class="nx">address</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getRepBalance</span><span class="p">(</span><span class="nx">branch</span><span class="p">,</span> <span class="nx">address</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getBranches</span><span class="p">([</span><span class="nx">callback</span><span class="p">])</span>

<span class="nx">getMarkets</span><span class="p">(</span><span class="nx">branch</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getMarketInfo</span><span class="p">(</span><span class="nx">market</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getMarketEvents</span><span class="p">(</span><span class="nx">market</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getNumEvents</span><span class="p">(</span><span class="nx">market</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getEventInfo</span><span class="p">(</span><span class="nx">event</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getBranchID</span><span class="p">(</span><span class="nx">branch</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getNonce</span><span class="p">(</span><span class="nx">id</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getCurrentParticipantNumber</span><span class="p">(</span><span class="nx">market</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getParticipantSharesPurchased</span><span class="p">(</span><span class="nx">market</span><span class="p">,</span> <span class="nx">participantNumber</span><span class="p">,</span> <span class="nx">outcome</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getSharesPurchased</span><span class="p">(</span><span class="nx">market</span><span class="p">,</span> <span class="nx">outcome</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getEvents</span><span class="p">(</span><span class="nx">branchId</span><span class="p">,</span> <span class="nx">votePeriod</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getVotePeriod</span><span class="p">(</span><span class="nx">branchId</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getPeriodLength</span><span class="p">(</span><span class="nx">branchId</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getBranch</span><span class="p">(</span><span class="nx">branchIdNumber</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">sendCash</span><span class="p">(</span><span class="nx">receiver</span><span class="p">,</span> <span class="nx">value</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">cashFaucet</span><span class="p">([</span><span class="nx">callback</span><span class="p">])</span>

<span class="nx">reputationFaucet</span><span class="p">([</span><span class="nx">callback</span><span class="p">])</span>

<span class="nx">getDescription</span><span class="p">(</span><span class="nx">id</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">createEvent</span><span class="p">(</span><span class="nx">eventObject</span><span class="p">)</span>
<span class="cm">/**
 * - eventObject has the following fields:
 *   - branchId &lt;integer&gt;
 *   - description &lt;string&gt;
 *   - minValue &lt;integer&gt; (will be floating-point)
 *   - maxValue &lt;integer&gt; (will be floating-point)
 *   - numOutcomes &lt;integer&gt;
 *   - expDate &lt;integer&gt; - block number when the event expires
 *   - onSent &lt;function&gt; - callback that fires after the event is broadcast to
 *      the network
 *   - onSuccess &lt;function&gt; - optional callback that fires when augur.js is
 *      able to see your event on the network
 *
 * - Callback functions should accept a single parameter: an event object with
 *      txHash and callReturn fields
 *
 * - Calling createEvent with positional arguments also works:
 *   - createEvent(branchId, description, expDate, minValue, maxValue, numOutcomes[, onSent, onSuccess])
 */</span>

<span class="nx">createMarket</span><span class="p">(</span><span class="nx">marketObject</span><span class="p">)</span>
<span class="cm">/**
 * - marketObject has the following fields:
 *   - branchId &lt;integer&gt;
 *   - description &lt;string&gt;
 *   - minValue &lt;integer&gt; (will be floating-point)
 *   - maxValue &lt;integer&gt; (will be floating-point)
 *   - numOutcomes &lt;integer&gt;
 *   - expDate &lt;integer&gt; - block number when the event expires
 *   - onSent &lt;function&gt; - callback that fires after the event is broadcast to
 *      the network
 *   - onSuccess &lt;function&gt; - optional callback that fires when augur.js is
 *      able to see the new market on the network
 *   - onFailure &lt;function&gt; - optional callback that fires if market creation
 *      errors
 *
 * - Callback functions should accept a single parameter: a market object
 *      txHash and callReturn fields
 *   
 * - Calling createMarket with positional arguments also works:
 *   - createMarket(branchId, description, alpha, liquidity, tradingFee, events[, onSent, onSuccess, onFailed])
 */</span>

<span class="nx">buyShares</span><span class="p">(</span><span class="nx">branchId</span><span class="p">,</span> <span class="nx">market</span><span class="p">,</span> <span class="nx">outcome</span><span class="p">,</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">nonce</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">sellShares</span><span class="p">(</span><span class="nx">branchId</span><span class="p">,</span> <span class="nx">market</span><span class="p">,</span> <span class="nx">outcome</span><span class="p">,</span> <span class="nx">amount</span><span class="p">,</span> <span class="nx">nonce</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">sendReputation</span><span class="p">(</span><span class="nx">branchId</span><span class="p">,</span> <span class="nx">receiver</span><span class="p">,</span> <span class="nx">value</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="nx">getSimulatedBuy</span><span class="p">(</span><span class="nx">market</span><span class="p">,</span> <span class="nx">outcome</span><span class="p">,</span> <span class="nx">amount</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">getSimulatedBuy</span><span class="p">(</span><span class="s2">"0xb13d98f933cbd602a3d9d4626260077678ab210d1e63b3108b231c1758ff9971"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">ONE</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>
<span class="p">[</span><span class="s2">"0x0000000000000000000000000000000000000000000000000013b073172aceb2"</span><span class="p">,</span>
 <span class="s2">"0x0000000000000000000000000000000000000000000000008de39f2500000000"</span><span class="p">]</span>

<span class="nx">getSimulatedSell</span><span class="p">(</span><span class="nx">market</span><span class="p">,</span> <span class="nx">outcome</span><span class="p">,</span> <span class="nx">amount</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">getSimulatedSell</span><span class="p">(</span><span class="s2">"0xb13d98f933cbd602a3d9d4626260077678ab210d1e63b3108b231c1758ff9971"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">ONE</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>
<span class="p">[</span><span class="s2">"0x0000000000000000000000000000000000000000000000000013af84d04feba9"</span><span class="p">,</span>
 <span class="s2">"0x0000000000000000000000000000000000000000000000008dd635b900000000"</span><span class="p">]</span>

<span class="nx">getCreator</span><span class="p">(</span><span class="nx">id</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">market</span> <span class="o">=</span> <span class="s2">"0xb13d98f933cbd602a3d9d4626260077678ab210d1e63b3108b231c1758ff9971"</span><span class="p">;</span>
<span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">getCreator</span><span class="p">(</span><span class="nx">market</span><span class="p">);</span>
<span class="s2">"0x0000000000000000000000001c11aa45c792e202e9ffdc2f12f99d0d209bef70"</span>

<span class="nx">getCreationFee</span><span class="p">(</span><span class="nx">id</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>

<span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">getCreationFee</span><span class="p">(</span><span class="nx">market</span><span class="p">)</span>
<span class="s2">"0x00000000000000000000000000000000000000000000000a0000000000000000"</span>

<span class="nx">getExpiration</span><span class="p">(</span><span class="nx">event</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span><span class="err">:</span> <span class="nx">Event</span> <span class="nx">expiration</span> <span class="nx">block</span><span class="p">.</span>

<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="s2">"0xb2a6de45f349b5ac384b01a785e640f519f0a8597ab2031c964c7f572d96b13c"</span><span class="p">;</span>
<span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">getExpiration</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="s2">"0x000000000000000000000000000000000000000000000000000000000003d090"</span>

<span class="nx">getMarketNumOutcomes</span><span class="p">(</span><span class="nx">market</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span><span class="err">:</span> <span class="nb">Number</span> <span class="nx">of</span> <span class="nx">outcomes</span> <span class="k">in</span> <span class="k">this</span> <span class="nx">market</span> <span class="nx">as</span> <span class="nx">an</span> <span class="nx">integer</span><span class="p">.</span>

<span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">getMarketNumOutcomes</span><span class="p">(</span><span class="nx">market</span><span class="p">)</span>
<span class="mi">2</span>

<span class="nx">price</span><span class="p">(</span><span class="nx">market</span><span class="p">,</span> <span class="nx">outcome</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span><span class="err">:</span> <span class="nx">Get</span> <span class="nx">the</span> <span class="nx">current</span> <span class="p">(</span><span class="nx">instantaneous</span><span class="p">)</span> <span class="nx">price</span> <span class="nx">of</span> <span class="nx">an</span> <span class="nx">outcome</span><span class="p">.</span>

<span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">price</span><span class="p">(</span><span class="nx">market_id</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">dividedBy</span><span class="p">(</span><span class="nx">augur</span><span class="p">.</span><span class="nx">ONE</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">());</span> <span class="p">})</span>
<span class="mf">0.55415210523642599583</span>

<span class="nx">getWinningOutcomes</span><span class="p">(</span><span class="nx">market</span><span class="p">[,</span> <span class="nx">callback</span><span class="p">])</span>
</code></pre>

<p>The Augur API is a set of JavaScript bindings for the methods encoded in Augur&rsquo;s <a href="https://github.com/AugurProject/augur-core">smart contracts</a>.  The API method name, as well as its parameters, are generally identical to those of the underlying smart contract method.</p>

<p>In some cases, you may need more flexibility beyond simply mix-and-matching the Augur API methods.  To do this, use <a href="https://github.com/AugurProject/ethrpc">ethrpc</a>&rsquo;s lower-level <code class="prettyprint">invoke</code> method (<code class="prettyprint">augur.rpc.invoke</code>).  First, build a transaction object manually, then execute it using <code class="prettyprint">invoke</code>.  The <code class="prettyprint">invoke</code> method executes a method in a contract already on the network.  It can broadcast transactions to the network and/or capture return values by calling the contract method(s) locally.</p>
<pre class="highlight javascript"><code>
<span class="c1">// The method called here doubles its input argument.</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">invoke</span><span class="p">({</span>
   <span class="na">to</span><span class="p">:</span> <span class="s2">"0x5204f18c652d1c31c6a5968cb65e011915285a50"</span><span class="p">,</span>
   <span class="na">method</span><span class="p">:</span> <span class="s2">"double"</span><span class="p">,</span>
   <span class="na">signature</span><span class="p">:</span> <span class="s2">"i"</span><span class="p">,</span>
   <span class="na">params</span><span class="p">:</span> <span class="mi">22121</span><span class="p">,</span> <span class="c1">// parameter value(s)</span>
   <span class="na">send</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
   <span class="na">returns</span><span class="p">:</span> <span class="s2">"number"</span>
<span class="p">});</span>
<span class="c1">// this returns:</span>
<span class="mi">44242</span>
</code></pre>

<p>Transaction fields are as follows:</p>

<p>Required:</p>

<ul>
<li>to: <code class="prettyprint">&lt;contract address&gt; (hexstring)</code></li>
<li>method: <code class="prettyprint">&lt;function name&gt; (string)</code></li>
<li>signature: <code class="prettyprint">&lt;function signature, e.g. &quot;iia&quot;&gt; (string)</code></li>
<li>params: <code class="prettyprint">&lt;parameters passed to the function&gt;</code></li>
</ul>

<p>Optional:</p>

<ul>
<li>send: <code class="prettyprint">&lt;true to sendTransaction, false to call (default)&gt;</code></li>
<li>from: <code class="prettyprint">&lt;sender&#39;s address&gt; (hexstring; defaults to the coinbase account)</code></li>
<li>returns: <code class="prettyprint">&lt;&quot;array&quot;, &quot;int&quot;, &quot;BigNumber&quot;, or &quot;string&quot; (default)&gt;</code></li>
</ul>

<p>The <code class="prettyprint">params</code> and <code class="prettyprint">signature</code> fields are required if your function accepts parameters; otherwise, these fields can be excluded.  The <code class="prettyprint">returns</code> field is used only to format the output, and does not affect the actual RPC request.</p>

<aside class="notice"><b><code>invoke</code> currently only works for <a href="https://github.com/ethereum/serpent">Serpent</a> contracts.</b>  The extra datatypes included by <a href="https://github.com/ethereum/solidity">Solidity</a> are not (yet) supported by the <a href="https://github.com/AugurProject/augur-abi">augur-abi</a> encoder.  The augur-abi encoder requires all parameters to be type <code>string</code>, <code>int256</code>, or <code>int256[]</code>.</aside>

          <h1 id="json-rpc">JSON-RPC</h1>

<p>augur.js communicates with the Ethereum network using the <a href="https://github.com/AugurProject/ethrpc">ethrpc</a> module, which implements Etherum&rsquo;s generic <a href="https://github.com/ethereum/wiki/wiki/JSON-RPC">JSON-RPC</a> interface.  In addition to being the building blocks for the Augur API&rsquo;s higher-level methods, ethrpc methods are available directly via <code class="prettyprint">augur.rpc</code>.</p>

<h2 id="basic-rpc">Basic RPC</h2>

<p>The <code class="prettyprint">raw</code> method allows you to send in raw commands (similar to sending in via cURL):</p>
<pre class="highlight plaintext"><code>&gt; augur.rpc.raw("net_peerCount")
"0x10"

&gt; augur.rpc.eth("gasPrice")
"0x015f90"
</code></pre>

<p>Many of the commonly used functions have named wrappers.  For example, <code class="prettyprint">blockNumber</code> fetches the current block number:</p>
<pre class="highlight javascript"><code><span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">blockNumber</span><span class="p">()</span>
<span class="mi">217153</span>
</code></pre>

<h2 id="contract-upload-and-download">Contract upload and download</h2>

<p><code class="prettyprint">publish</code> broadcasts (uploads) a compiled contract to the network, and returns the contract&rsquo;s address:</p>
<pre class="highlight javascript"><code><span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s2">"0x603980600b6000396044567c01000000000000000000000000000000000000000000000000000000006000350463643ceff9811415603757600a60405260206040f35b505b6000f3"</span><span class="p">)</span>
<span class="s2">"0xf4549459f9ef8c8898c054a7fc37c286831c2ced"</span>
</code></pre>

<p><code class="prettyprint">read</code> downloads code from a contract already on the Ethereum network:</p>
<pre class="highlight javascript"><code><span class="o">&gt;</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="s2">"0x5204f18c652d1c31c6a5968cb65e011915285a50"</span><span class="p">)</span>
<span class="s2">"0x7c010000000000000000000000000000000000000000000000000000000060003504636ffa1caa81141560415760043560405260026040510260605260206060f35b50"</span>
</code></pre>

          <h1 id="filters">Filters</h1>
<pre class="highlight javascript"><code><span class="c1">// Start filtering</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">listen</span><span class="p">({</span>
    <span class="na">block</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">blockHash</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"new block:"</span><span class="p">,</span> <span class="nx">blockHash</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">contracts</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">augurTx</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"augur transaction:"</span><span class="p">,</span> <span class="nx">augurTx</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">creation</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newMarket</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"new market created:"</span><span class="p">,</span> <span class="nx">newMarket</span><span class="p">.</span><span class="nx">marketId</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">price</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">updatedPrice</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"updated price:"</span><span class="p">,</span> <span class="nx">updatedPrice</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Stop filtering</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">ignore</span><span class="p">();</span>

<span class="c1">// Stop filtering and uninstall filters</span>
<span class="nx">augur</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="cm">/**
 * Example filter results
 */</span>

<span class="c1">// block</span>
<span class="nx">blockHash</span> <span class="o">=</span> <span class="s2">"0x999553c632fa10f3eb2af9a2be9ab612726372721680e3f76441f75f7c879a2f"</span>

<span class="c1">// contracts (topics and data fields vary by contract and method)</span>
<span class="nx">augurTx</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">address</span><span class="p">:</span> <span class="s2">"0xc1c4e2f32e4b84a60b8b7983b6356af4269aab79"</span><span class="p">,</span>
    <span class="na">topics</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"0x1a653a04916ffd3d6f74d5966492bda358e560be296ecf5307c2e2c2fdedd35a"</span><span class="p">,</span>
        <span class="s2">"0x00000000000000000000000005ae1d0ca6206c6168b42efcd1fbe0ed144e821b"</span><span class="p">,</span>
        <span class="s2">"0x3557ce85d2ac4bcd36be7f3a6e0f63cfa6b18d34908b810ed41e44aafb399b44"</span><span class="p">,</span>
        <span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000001"</span>
    <span class="p">],</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"0x000000000000000000000000000000000000000000000001000000000000d330"</span><span class="p">,</span>
        <span class="s2">"0xfffffffffffffffffffffffffffffffffffffffffffffffeffffffffffffffa3"</span>
    <span class="p">],</span>
    <span class="na">blockNumber</span><span class="p">:</span> <span class="s2">"0x110d"</span><span class="p">,</span>
    <span class="na">logIndex</span><span class="p">:</span> <span class="s2">"0x0"</span><span class="p">,</span>
    <span class="na">blockHash</span><span class="p">:</span> <span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span>
    <span class="na">transactionHash</span><span class="p">:</span> <span class="s2">"0x8481c76a1f88a203191c1cd1942963ff9f1ea31b1db02f752771fef30133798e"</span><span class="p">,</span>
    <span class="na">transactionIndex</span><span class="p">:</span> <span class="s2">"0x0"</span>
<span class="p">}</span>

<span class="c1">// creation</span>
<span class="nx">newMarket</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">marketId</span><span class="p">:</span> <span class="s2">"-0xcaa8317a2d53b432c94180c591f09c30594e72cb6f747ef12be1bb5504c664bc"</span><span class="p">,</span>
    <span class="na">blockNumber</span><span class="p">:</span> <span class="s2">"4689"</span>
<span class="p">}</span>

<span class="c1">// price</span>
<span class="nx">updatedPrice</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">user</span><span class="p">:</span> <span class="s2">"0x00000000000000000000000005ae1d0ca6206c6168b42efcd1fbe0ed144e821b"</span><span class="p">,</span>
    <span class="na">marketId</span><span class="p">:</span> <span class="s2">"-0xcaa8317a2d53b432c94180c591f09c30594e72cb6f747ef12be1bb5504c664bc"</span><span class="p">,</span>
    <span class="na">outcome</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="s2">"1.00000000000000002255"</span><span class="p">,</span>
    <span class="na">cost</span><span class="p">:</span> <span class="s2">"-1.00000000000000008137"</span><span class="p">,</span>
    <span class="na">blockNumber</span><span class="p">:</span> <span class="s2">"4722"</span>
<span class="p">}</span>

</code></pre>

<p>augur.js binds the RPC commands associated with Ethereum&rsquo;s blockchain (transaction/block) filters, as well as whisper filters.  Messages &ldquo;caught&rdquo; by filters are retrieved by polling the Ethereum node; the filtering &ldquo;heartbeat&rdquo; checks for new messages every 5 seconds.  The three primary types of blockchain filters augur.js uses are:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Message contents</th>
</tr>
</thead><tbody>
<tr>
<td>block</td>
<td>new blockhashes</td>
</tr>
<tr>
<td>contracts</td>
<td>transactions involving any Augur contract</td>
</tr>
<tr>
<td>creation</td>
<td>new market&rsquo;s ID and creation blocknumber</td>
</tr>
<tr>
<td>price</td>
<td>market price updates</td>
</tr>
</tbody></table>

<p>Passing callback functions for <code class="prettyprint">block</code>, <code class="prettyprint">contracts</code>, <code class="prettyprint">creation</code> and/or <code class="prettyprint">price</code> to the <code class="prettyprint">augur.filters.listen</code> method will start polling the block, contracts, creation and price filters, respectively.</p>

<aside class="notice">You can adjust the polling interval by changing the value of <code>augur.filters.PULSE</code>.  By default it is set to <code>5000</code> (5 seconds).</aside>

          <h1 id="batching">Batching</h1>
<pre class="highlight javascript"><code><span class="cm">/**
 * Batch RPC request that gets the cash and reputation balances for account
 * 0x63524e3fe4791aefce1e932bbfb3fdf375bfad89.
 */</span>

<span class="kd">var</span> <span class="nx">myAccount</span> <span class="o">=</span> <span class="s2">"0x63524e3fe4791aefce1e932bbfb3fdf375bfad89"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">batch</span> <span class="o">=</span> <span class="nx">augur</span><span class="p">.</span><span class="nx">createBatch</span><span class="p">();</span>

<span class="nx">batch</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">"getCashBalance"</span><span class="p">,</span> <span class="p">[</span><span class="nx">myAccount</span><span class="p">],</span> <span class="nx">callback</span><span class="p">);</span>
<span class="nx">batch</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">"getRepBalance"</span><span class="p">,</span> <span class="p">[</span><span class="nx">augur</span><span class="p">.</span><span class="nx">branches</span><span class="p">.</span><span class="nx">dev</span><span class="p">,</span> <span class="nx">myAccount</span><span class="p">],</span> <span class="nx">callback</span><span class="p">);</span>

<span class="nx">batch</span><span class="p">.</span><span class="nx">execute</span><span class="p">();</span>

<span class="c1">// Manual batching</span>

<span class="kd">var</span> <span class="nx">txlist</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="na">to</span><span class="p">:</span> <span class="s2">"0x3caf506cf3d5bb16ba2c8f89a6591c5160d69cf3"</span><span class="p">,</span>
    <span class="na">method</span><span class="p">:</span> <span class="s2">"ten"</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="na">to</span><span class="p">:</span> <span class="s2">"0x5204f18c652d1c31c6a5968cb65e011915285a50"</span><span class="p">,</span>
    <span class="na">method</span><span class="p">:</span> <span class="s2">"double"</span><span class="p">,</span>
    <span class="na">signature</span><span class="p">:</span> <span class="s2">"i"</span><span class="p">,</span>
    <span class="na">params</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}];</span>

<span class="nx">augur</span><span class="p">.</span><span class="nx">rpc</span><span class="p">.</span><span class="nx">batch</span><span class="p">(</span><span class="nx">txlist</span><span class="p">);</span>

<span class="c1">// returns: ['10', '6']</span>
</code></pre>

<p>augur.js implements <a href="http://www.jsonrpc.org/specification#batch">batch RPC</a>, which can help reduce overhead if you&rsquo;re making several API calls that can be run in parallel (i.e., do not depend on each other&rsquo;s results).</p>

<p>For finer-grained control over the batched commands, you can also use <a href="https://github.com/AugurProject/ethrpc">ethrpc</a>&rsquo;s lower-level <code class="prettyprint">batch</code> method directly, which is attached to <code class="prettyprint">augur.rpc</code>.  <code class="prettyprint">augur.rpc.batch</code> accepts a list of manually constructed transaction objects.</p>

          <h1 id="tests">Tests</h1>

<p><a href="https://github.com/AugurProject/augur.js">augur.js</a> includes unit tests.  Tests are run using <a href="http://mochajs.org/">Mocha</a>.</p>

<p><code class="block">$ npm install -g mocha</code></p>

<p>There are two test suites &ndash; the first only runs tests which do not require sending transactions to the Ethereum network, and the second runs a full complement of tests, including tests that create events, markets, buy and sell shares, etc.  Generally, it is recommended to only run the full test suite on a private chain.</p>

<p>To run the test suite without transactional tests:</p>

<p><code class="block">$ npm run testnet</code></p>

<p>To set up a private chain to run the full test suite, run the included <a href="https://github.com/AugurProject/augur.js/blob/master/scripts/setup.js">setup.js script</a>.  This script requires a local installation of geth, and creates a fresh blockchain (with network ID 10101) in data directory <code class="prettyprint">~/.augur-test</code>.  It does <em>not</em> create Ethereum accounts for you; you must set these up yourself prior to running setup.js.  The script assumes that your account password is in a file in the new data directory called <code class="prettyprint">.password</code>.</p>

<p>The setup script also will upload the Augur contracts to the new blockchain.  You must have a local clone of the <a href="https://github.com/AugurProject/augur-core">augur-core</a> repository on your machine for this to work.  The setup script can be run with npm:</p>

<p><code class="block">$ npm run setup -- --augur /path/to/augur-core</code></p>

<p>After the setup script finishes, you can run the full test suite using npm:</p>

<p><code class="block">$ npm test -- --gospel</code></p>

          <h1 id="errors">Errors</h1>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="mi">412</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction validation failed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>In addition to the error codes generated by the Augur API, there is a separate set of error codes used by Augur&rsquo;s <a href="https://github.com/AugurProject/augur-core">smart contracts</a>.  To avoid confusion, API error codes are positive integers, while contract error codes are integers less than or equal to zero.</p>

<p>API and contract errors are returned as objects that contain an <code class="prettyprint">error</code> field (the integer error code) and a <code class="prettyprint">message</code> field (a description of the error).</p>

<aside class="notice">In addition to the errors tabulated below, contract methods may also return <code>"0x"</code>, accompanied by the message <code>"no response or bad input"</code>.  This error indicates that either the contract was unreachable or the invoked method did not execute successfully.</aside>

<h2 id="api-errors">API Errors</h2>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>65</td>
<td>Whisper Post Failed: could not post message to whisper</td>
</tr>
<tr>
<td>98</td>
<td>Database Write Failed</td>
</tr>
<tr>
<td>99</td>
<td>Database Read Failed</td>
</tr>
<tr>
<td>400</td>
<td>Invalid Contract Parameter: cannot send parameter to contract</td>
</tr>
<tr>
<td>401</td>
<td>Not Logged In</td>
</tr>
<tr>
<td>402</td>
<td>Incorrect number of parameters</td>
</tr>
<tr>
<td>403</td>
<td>Bad Credentials: incorrect handle or password</td>
</tr>
<tr>
<td>404</td>
<td>Transaction Not Found</td>
</tr>
<tr>
<td>405</td>
<td>Password Too Short: password must be at least 6 characters long</td>
</tr>
<tr>
<td>406</td>
<td>Null Call Return: expected contract call to return value, received null</td>
</tr>
<tr>
<td>407</td>
<td>Null Response: expected transaction hash from Ethereum node, received null</td>
</tr>
<tr>
<td>408</td>
<td>No Response</td>
</tr>
<tr>
<td>409</td>
<td>Invalid Response: could not parse response from Ethereum node</td>
</tr>
<tr>
<td>410</td>
<td>Local Node Failure: RPC request to local Ethereum node failed</td>
</tr>
<tr>
<td>411</td>
<td>Hosted Node Failure: RPC request to hosted nodes failed</td>
</tr>
<tr>
<td>412</td>
<td>Transaction Invalid: transaction validation failed</td>
</tr>
<tr>
<td>422</td>
<td>Handle Taken: handle already taken</td>
</tr>
<tr>
<td>450</td>
<td>Filter could not be created</td>
</tr>
<tr>
<td>500</td>
<td>Transaction Failed</td>
</tr>
<tr>
<td>501</td>
<td>Transaction Not Confirmed: polled network but could not confirm transaction</td>
</tr>
<tr>
<td>502</td>
<td>Duplicate Transaction</td>
</tr>
<tr>
<td>650</td>
<td>Loopback Not Found: loopback interface required for synchronous local commands</td>
</tr>
<tr>
<td>651</td>
<td>Ethereum Not Found: no active Ethereum node(s) found</td>
</tr>
</tbody></table>

<h2 id="contract-errors">Contract Errors</h2>

<table><thead>
<tr>
<th>Contract Method</th>
<th>Error</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>buyShares</td>
<td>-1</td>
<td>Invalid outcome or trading closed</td>
</tr>
<tr>
<td>buyShares</td>
<td>-2</td>
<td>Entered a negative number of shares</td>
</tr>
<tr>
<td>buyShares</td>
<td>-3</td>
<td>Not enough money</td>
</tr>
<tr>
<td>buyShares</td>
<td>-4</td>
<td>Bad nonce/hash</td>
</tr>
<tr>
<td>cashFaucet</td>
<td>-1</td>
<td>Hey, you&rsquo;re not broke!</td>
</tr>
<tr>
<td>checkReportValidity</td>
<td>-1</td>
<td>Report isn&rsquo;t long enough</td>
</tr>
<tr>
<td>checkReportValidity</td>
<td>-2</td>
<td>Reporter doesn&rsquo;t exist, voting period is over, or voting period hasn&rsquo;t started yet</td>
</tr>
<tr>
<td>closeMarket</td>
<td>-1</td>
<td>Market has no cash</td>
</tr>
<tr>
<td>closeMarket</td>
<td>-2</td>
<td>0 outcome</td>
</tr>
<tr>
<td>closeMarket</td>
<td>-3</td>
<td>Outcome indeterminable</td>
</tr>
<tr>
<td>createEvent</td>
<td>0</td>
<td>Not enough money to pay fees or event already exists</td>
</tr>
<tr>
<td>createEvent</td>
<td>-1</td>
<td>We&rsquo;re either already past that date, branch doesn&rsquo;t exist, or description is bad</td>
</tr>
<tr>
<td>createMarket</td>
<td>-1</td>
<td>Bad input or parent doesn&rsquo;t exist</td>
</tr>
<tr>
<td>createMarket</td>
<td>-2</td>
<td>Too many events</td>
</tr>
<tr>
<td>createMarket</td>
<td>-3</td>
<td>Too many outcomes</td>
</tr>
<tr>
<td>createMarket</td>
<td>-4</td>
<td>Not enough money or market already exists</td>
</tr>
<tr>
<td>getSimulatedBuy</td>
<td>-2</td>
<td>Cost updating error (did you enter a valid quantity?)</td>
</tr>
<tr>
<td>getSimulatedSell</td>
<td>-2</td>
<td>Cost updating error (did you enter a valid quantity?)</td>
</tr>
<tr>
<td>report</td>
<td>0</td>
<td>Could not set reporter ballot</td>
</tr>
<tr>
<td>report</td>
<td>-1</td>
<td>Report length does not match the number of expiring events</td>
</tr>
<tr>
<td>report</td>
<td>-2</td>
<td>Voting period expired</td>
</tr>
<tr>
<td>report</td>
<td>-3</td>
<td>Incorrect hash</td>
</tr>
<tr>
<td>sellShares</td>
<td>-1</td>
<td>Invalid outcome or trading closed</td>
</tr>
<tr>
<td>sellShares</td>
<td>-2</td>
<td>Entered a negative number of shares</td>
</tr>
<tr>
<td>sellShares</td>
<td>-3</td>
<td>Not enough money</td>
</tr>
<tr>
<td>sellShares</td>
<td>-4</td>
<td>Bad nonce/hash</td>
</tr>
<tr>
<td>sendReputation</td>
<td>0</td>
<td>Not enough Reputation</td>
</tr>
<tr>
<td>sendReputation</td>
<td>-1</td>
<td>Your Reputation account was just created! Earn some Reputation before you can send to others.</td>
</tr>
<tr>
<td>sendReputation</td>
<td>-2</td>
<td>Receiving address doesn&rsquo;t exist</td>
</tr>
<tr>
<td>slashRep</td>
<td>0</td>
<td>Incorrect hash</td>
</tr>
<tr>
<td>slashRep</td>
<td>-2</td>
<td>Incorrect reporter ID</td>
</tr>
<tr>
<td>submitReportHash</td>
<td>0</td>
<td>Could not set report hash</td>
</tr>
<tr>
<td>submitReportHash</td>
<td>-1</td>
<td>Reporter doesn&rsquo;t exist, voting period is over, or voting period hasn&rsquo;t started yet</td>
</tr>
<tr>
<td>submitReportHash</td>
<td>-2</td>
<td>Not in hash submitting timeframe</td>
</tr>
</tbody></table>

          <h1 id="contributing">Contributing</h1>

<p>We think Augur and Ethereum are pretty awesome, and believe that they&rsquo;re going to change the world.  We&rsquo;d love it if you want to be a part of this &ndash; as a user, tester, or developer!</p>

<p>We use <a href="https://github.com/AugurProject/augur/issues">Github issues</a> as our bug tracker and to-do list.  If you want to put your shoulder to the wheel, just pick an issue you want to work on, comment on it to let us know you want to tackle it, and we&rsquo;ll help you get it done.</p>

<p>Most of our day-to-day conversation happens in our Slack.  (We also have an IRC gateway in #augur on Freenode that is connected to our Slack chat!)  Our Slack is totally open.  If you&rsquo;d like to join the conversation, just go to <a href="slackinaugur.herokuapp.com">slackinaugur.herokuapp.com</a> and sign up.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">JavaScript</a>
          </div>
      </div>
    </div>
  </body>
</html>
